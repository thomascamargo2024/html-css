var format_type,downloadButton,InitURL=getInitUrls(),urlParams=new URLSearchParams(window.location.search);urlParams.has("direct_download")&&(format_type=urlParams.get("format_type")||1,downloadButton=document.querySelector(`.dlbtn[data-format-type="${format_type}"]`)),$(function(){$(document).on("scroll",function(){350<$(document).scrollTop()?$(".detail-header").show():$(".detail-header").hide()}),$(document.body).on("click","#enlargeEl",function(){$("html").css({overflow:"hidden"});var e=$(".enlarge-pop-img").data("url");$(".enlarge-pop-img").attr("src",e),$(".enlarge-pop").show()}),$(document.body).on("click",".enlarge-pop .cls-btn",function(){$(".enlarge-pop").hide(),$("html").css({overflow:"auto"})}),$(document.body).on("keyup",function(e){$(".enlarge-pop").is(":visible")&&27==e.keyCode&&($(".enlarge-pop").hide(),$("html").css({overflow:"auto"}))}),$(".video-src").click(function(){var e=$(this).attr("src");$(".popup-box").show(),$(".alert-video").append('<video loop="loop" controls="controls" autoplay="autoplay" preload="none" src="'+e+'"></video>')}),$(".close-btn").click(function(){$(".popup-box").hide(),$(this).siblings().remove()}),$(document).scroll(function(){var e=$(this).scrollTop();$(".detail-float-top").css("top",e),$(".detail-share-team").css("top",e),$(".detail-float").css("top",e+58)}),$(".copybtn").on("click",function(){$(this).parents(".copy-bar")[0].getElementsByTagName("input")[0].select(),document.execCommand("copy")?(document.execCommand("copy"),console.log("复制成功")):console.log("复制失败")}),$(".copyLink").on("click",function(e){console.log($(this).hasClass("detail-collect"),e,$(this));var e=window.location.href,t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),t.style.display="none",$(this).hasClass("detail-collect")?$(this).html('<svg class="svg-icon icon-link"><use xlink:href="#iconlianjie"></use></svg>Link Copied'):layer.msg('<svg class="svg-icon icon-link" style="color: #14B2A0;margin-right: 12px;font-size:20px;"><use xlink:href="#iconlianjie"></use></svg>Link Copied')}),$(".accordion li a").on("click",function(){$(".accordion li a").removeClass("active"),$(this).addClass("active")});var e=0,t=$(".pb-small-lable").css("margin-left"),l=$(".lable-body").width(),o=null;function n(e,t){this.element=e,this.wrapper=e.find(".swiper-wrapper"),this.slider=e.find(".swiper-slide"),this.btn_prev=e.find(".swiper-button-prev"),this.btn_next=e.find(".swiper-button-next"),this.current=0,this.timmer=null,this.width=this.slider.width(),this.size=this.slider.length,this.loop=t.hasOwnProperty("loop")&&t.loop,this.autoplay=t.hasOwnProperty("autoplay"),this.autoplay_delay=6e3,this.init()}0<=t&&$(".lable-body .lable-btn.prev").hide(),$(".lable-body .lable-btn.next").click(function(){e==(o=1370==l?-445:1200==l?-575:-775)+25?e=o:e-=175,$(".lable-body .lable-btn.prev").show(),$(".pb-small-lable").animate({"margin-left":e},300,function(){e<=o+20&&$(".lable-body .lable-btn.next").hide(),$(".lable-body").mouseover(function(){e<=0&&($(".lable-body .lable-btn.prev").show(),$(".lable-body .lable-btn.next").show()),e<=o+20?$(".lable-body .lable-btn.next").hide():$(".lable-body .lable-btn.next").show()}).mouseleave(function(){$(".lable-body .lable-btn.prev").hide()})})}),$(".lable-body .lable-btn.prev").click(function(){e==o?e=o+25:e+=175,$(".lable-body .lable-btn.next").show(),$(".pb-small-lable").animate({"margin-left":e},300,function(){0<=e&&$(".lable-body .lable-btn.prev").hide(),$(".lable-body").mouseover(function(){0<=e?($(".lable-body .lable-btn.prev").hide(),$(".lable-body .lable-btn.next").show()):$(".lable-body .lable-btn.prev").show()}).mouseleave(function(){$(".lable-body .lable-btn.next").hide()})})}),n.prototype={init:function(){var e=this;this.autoplay&&(this.autoplay.hasOwnProperty("delay")&&(this.autoplay_delay=this.autoplay.delay),this.timmer=setInterval(function(){e.handelNext()},this.autoplay_delay)),this.loop&&this.copySlide(),this.bindEvent()},bindEvent:function(){var e=this;this.btn_prev.on("click",function(){e.handelPrev()}),this.btn_next.on("click",function(){e.handelNext()}),this.autoplay&&this.element.hover(function(){clearInterval(e.timmer)},function(){e.timmer=setInterval(function(){e.handelNext()},e.autoplay_delay)})},handelNext:function(){!this.loop&&this.current==this.size||(this.current++,this.handelSlide())},handelPrev:function(){!this.loop&&0==this.current||(this.current--,this.handelSlide())},handelSlide(){var e=$("body").hasClass("ar-body"),t=this;e?this.wrapper.stop().animate({left:(this.current+1)*this.width},300,"linear",function(){t.loop&&(t.current>=t.size&&(t.current=0,t.wrapper.css("left",(t.current+1)*t.width+"px")),t.current<=-1&&(t.current=t.size-1,t.wrapper.css("left",t.size*t.width+"px")))}):this.wrapper.stop().animate({left:-(this.current+1)*this.width},300,"linear",function(){t.loop&&(t.current>=t.size&&(t.current=0,t.wrapper.css("left",-(t.current+1)*t.width+"px")),t.current<=-1&&(t.current=t.size-1,t.wrapper.css("left",-t.size*t.width+"px")))})},copySlide(){var e=this.slider.eq(0),t=this.slider.eq(this.size-1);this.wrapper.append(e.clone()),this.wrapper.prepend(t.clone()),this.wrapper.find(".scrollLoading").scrollLoading({callback:function(){$(this).addClass("scrollLoaded")}})}};new n($(".similar-swiper .swiper-container"),{autoplay:{delay:5e3},loop:!0});$(".can-replay-btn").on("click",function(){if(""==cookie("auth_id"))return _reg(),!1;var e=$(this).data("id");$.ajax({url:"/?m=AjaxDownload&a=open",data:{id:e,flag:6},method:"get",success:function(e){if(200!=e.status)return layer.msg(data.message),!1;{if(e.authorization_needed)return showLicenseeModal(),!1;if(1==e.email)return $(".downloadEmailVerify").remove(),$(document.body).append('<i class="downloadEmailVerify">'+e.html+"</i>"),!0;const t=e.url;$(".video-js").css("display","block"),videojs("my-player").ready(function(){this.src(t),this.load(),setTimeout(()=>{videojs("my-player",{fluid:!0},function(){videojs.log("播放器准备好了!"),this.play(),this.on("ended",function(){videojs.log("播放结束!")})})},1e3),$(".can-replay-btn").hide()})}}})})});